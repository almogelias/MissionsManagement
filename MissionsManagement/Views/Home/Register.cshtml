
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="~/Content/Register.css">
    <div>

        <div class="container_form">
            <h1>Register</h1>
            <p>Please fill in this form to create an account.</p>
            <hr>
            <div class="section">
                <label for="email"><b>Email</b></label>
                <input type="text" placeholder="Enter Email" name="email" id="email" required>
            </div>
            <div class="section">
                <label for="psw"><b>Password</b></label>
                <input type="password" placeholder="Enter Password" name="psw" id="psw" required>
            </div>
            <div class="section">
                <label for="psw-repeat"><b>Repeat Password</b></label>
                <input type="password" placeholder="Repeat Password" name="psw-repeat" id="psw-repeat" required>
            </div>

            <hr>

            <p>By creating an account you agree to our <a href="#">Terms & Privacy</a>.</p>
            <button onclick="register()" type="submit" class="registerbtn">Register</button>
        </div>

        <div class="container signin">
            <p>Already have an account? <a href="@Url.Action("Login", "Home")" ">Sign in</a>.</p>
        </div>
    </div>

    <script>


        const register = async () => {
            let email = document.getElementById("email").value
            let password = document.getElementById("psw").value
            let repeatPass = document.getElementById("psw-repeat").value
            let res_from_controller = ''
            let token =''

            let url = '@HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority)'
            if (password == repeatPass) {
                myBody = {
                    "Email": email,
                    "Password": password,
                    "ConfirmPassword": repeatPass
                }
                const response = await fetch(url+'/api/account/register', {
                    method: 'POST',
                    body: JSON.stringify(myBody), // string or object
                    headers: { 'Content-Type': 'application/json' }
                }).then(res => {
                    res_from_controller = res.status
                    console.log('response from controller: ' + res_from_controller)
                });

                if (res_from_controller == '200') {
                    alert("User submitted")
                    window.location.href='@HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority)'

                }
                else {
                    alert("There was an error!")
                }

        // do something with myJson
            }

        }
    </script>